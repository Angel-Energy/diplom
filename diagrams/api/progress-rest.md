# REST эндпоинты прогресса

## Реализация в проекте
- **Эндпоинты**:
  - `/progress` (GET): Возвращает текущий прогресс игрока (`game_state_id`, `current_day`, `trust_level`, `threat_level`) в зашифрованном JSON.
  - `/progress` (POST): Обновляет прогресс, принимая JSON с новыми значениями (например, `{"current_day": 2, "trust_level": 60}`).
  - `/choices` (GET): Возвращает доступные варианты выбора для текущего диалога.
  - `/choices` (POST): Сохраняет выбор игрока, обновляя `trust_level` или `threat_level`.
- **Реализация**: Эндпоинты реализованы на Ktor-сервере с использованием SQLCipher для MySQL. Клиент (Ktor Client) отправляет/получает данные через TLS, с тёмной темой в интерфейсе статуса синхронизации в Compose.

## Взаимодействие с командой
- **Android-разработчик (Kotlin)**: Реализует клиентскую часть с `Ktor Client`.
- **Backend-разработчик**: Создаёт и тестирует эндпоинты на Ktor.
- **Специалист по безопасности**: Обеспечивает шифрование и соответствие 152-ФЗ.
- **Геймдизайнер**: Определяет структуру данных прогресса.
- **QA-аналитик**: Тестирует запросы и ответы.
- **Технический писатель**: Документирует API.

## Кому подходит
- Подходит для backend-разработчика с опытом Ktor и Android-разработчика с навыками сетевых запросов.

## Аспекты работы
- Требует тестирования скорости и безопасности запросов.
- Данные шифруются с AES-256.
- Документация включает спецификацию эндпоинтов.

## Текстовая схема (PlantUML)
```plantuml
@startuml REST Endpoints
skinparam monochrome true

interface "/progress" {
  + GET : Возвращает прогресс
  + POST : Обновляет прогресс
}

interface "/choices" {
  + GET : Возвращает варианты
  + POST : Сохраняет выбор
}

actor Client
participant "Ktor Client" as KC
participant "Ktor Server" as KS

Client -> KC : Запрос /progress
KC -> KS : GET /progress
KS --> KC : JSON прогресса
KC --> Client : Обновление UI

Client -> KC : Отправка /choices
KC -> KS : POST /choices
KS --> KC : Подтверждение
KC --> Client : Обновление состояния
@enduml
``` 